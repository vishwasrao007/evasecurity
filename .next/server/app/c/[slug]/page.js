(()=>{var e={};e.id=111,e.ids=[111],e.modules={670:(e,t,n)=>{Promise.resolve().then(n.bind(n,7195))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1010:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h,metadata:()=>d});var s=n(2710),i=n(5475),r=n.n(i),o=n(1e3),a=n.n(o),l=n(705);n(8315);let c={url:"https://www.hdfcbank.com/",title:"HDFC Bank Eva",description:"HDFC Bank AI assistant Eva"},u="https://www.hdfcbank.com/images/hdfc-bank-logo.png",d={title:c.title,description:c.description,openGraph:{images:u,url:c.url,title:c.title,description:c.description},twitter:{images:u,title:c.title,card:"summary_large_image",description:c.description}};function h({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsx)("head",{children:(0,s.jsx)("link",{rel:"icon",href:"/hdfc-logo.png",type:"image/png"})}),(0,s.jsxs)("body",{className:`${r().className} ${a().className} antialiased`,children:[(0,s.jsx)(l.Toaster,{}),e]})]})}},1337:(e,t,n)=>{Promise.resolve().then(n.bind(n,4695))},1458:(e,t,n)=>{Promise.resolve().then(n.bind(n,4607))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3587:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>c});var s=n(3582),i=n(4825),r=n(1553),o=n.n(r),a=n(4782),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);n.d(t,l);let c={children:["",{children:["c",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,7195)),"/Users/nileshvishwasrao/Nilesh/elevenlabs-test/security/app/c/[slug]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,1010)),"/Users/nileshvishwasrao/Nilesh/elevenlabs-test/security/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,3671,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,8986,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,5827,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["/Users/nileshvishwasrao/Nilesh/elevenlabs-test/security/app/c/[slug]/page.tsx"],d={require:n,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/c/[slug]/page",pathname:"/c/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3850:(e,t,n)=>{"use strict";e.exports=n(8683).style},3873:e=>{"use strict";e.exports=require("path")},4695:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var s=n(9260),i=n(3850),r=n.n(i),o=n(9045);let a=(e,t=50,n=!1)=>{let[s,i]=(0,o.useState)(0),r=n?e.split(""):e.split(" ");return(0,o.useEffect)(()=>{i(0)},[e]),(0,o.useEffect)(()=>{if(s>=r.length)return;let e=setInterval(()=>{i(e=>e+1)},t);return()=>{clearInterval(e)}},[s,r,t]),r.slice(0,s).join(n?"":" ")};function l({onStartListening:e,onStopListening:t,isAudioPlaying:n,currentText:i}){let[l,c]=(0,o.useState)("idle"),u=a(i&&i.trim().length>0?i:"Hi Good Morning! How may I help you?",20);return a("Click the circle to start the conversation",20),(0,s.jsxs)("div",{style:{minHeight:"100vh"},className:"jsx-302a444b4c98172c relative flex flex-col items-center justify-between shadow-xl h-[100vh] overflow-hidden",children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100vh",width:"100vw",maxWidth:440,position:"relative",overflow:"hidden",borderRadius:"45px"},className:"jsx-302a444b4c98172c cont",children:[(0,s.jsx)("div",{style:{background:"radial-gradient(223.36% 111.8% at 50% 100%, #E8DDFF 0%, #71B6E4 40.5%, #687FDE 69.5%, #3A59D6 100%)",filter:"blur(12px)",zIndex:-1,borderRadius:"55px"},className:"jsx-302a444b4c98172c absolute top-0 left-0 w-full h-full"}),(0,s.jsx)("div",{style:{right:"1.225rem"},className:"jsx-302a444b4c98172c absolute top-5 z-10",children:(0,s.jsx)("img",{src:"/close.svg",alt:"Close",className:"jsx-302a444b4c98172c h-8"})}),(0,s.jsxs)("div",{className:"jsx-302a444b4c98172c flex flex-col items-center w-full pt-[3.2rem] z-10",children:["idle"===l&&(0,s.jsxs)("div",{className:"jsx-302a444b4c98172c flex flex-col items-center w-4/5 mx-auto text-center",children:[(0,s.jsx)("span",{className:"jsx-302a444b4c98172c text-white text-base font-medium",children:"Welcome to HDFC Bank!"}),(0,s.jsx)("span",{className:"jsx-302a444b4c98172c text-[52px] font-extrabold text-white leading-none",children:(0,s.jsx)("span",{className:"jsx-302a444b4c98172c text-[#AEE2FF]",children:"I'm EVA"})}),(0,s.jsx)("span",{className:"jsx-302a444b4c98172c text-white text-xl font-medium",children:"Your all new AI Assistant"})]}),(0,s.jsx)("div",{className:"jsx-302a444b4c98172c relative flex items-center justify-center mb-0 md:mb-[88px]",children:(0,s.jsx)("div",{onClick:()=>{"listening"===l||"speaking"===l?t?.():n||e?.()},style:{width:350,height:300},className:"jsx-302a444b4c98172c rounded-full p-2",children:(0,s.jsx)("img",{src:"/eva.gif",alt:"listening"===l?"AI is listening":"speaking"===l?"AI is speaking":"AI is idle",style:{width:600,height:400},className:"jsx-302a444b4c98172c rounded-full object-cover"})})}),(0,s.jsx)("div",{className:"jsx-302a444b4c98172c flex flex-col items-center w-4/5 mx-auto text-center",children:u.split(/(?<=[.?!])\s+/).map((e,t)=>{let n=e.trim(),i=n.toLowerCase(),r=n.endsWith("?"),o=i.includes("please enter")||i.includes("kindly provide"),a=i.startsWith("please tell me"),l=i.startsWith("please say your"),c=i.startsWith("please confirm"),u="have a wonderful day!"===i;return r||o||a||l||c||u?(0,s.jsx)("span",{className:"jsx-302a444b4c98172c block text-2xl font-bold text-white",children:n},t):(0,s.jsx)("span",{className:"jsx-302a444b4c98172c block text-base font-normal text-white",children:n},t)})})]}),(0,s.jsx)("div",{className:"jsx-302a444b4c98172c w-full px-2 pb-2 pt-2",children:(0,s.jsxs)("div",{style:{borderRadius:"43px"},className:"jsx-302a444b4c98172c bg-white flex flex-col items-center justify-center w-full min-h-[180px] h-[180px] p-2",children:[(0,s.jsx)("div",{className:"jsx-302a444b4c98172c flex items-center gap-2 mb-1",children:"listening"===l&&(0,s.jsx)("span",{className:"jsx-302a444b4c98172c text-[#5B7FFF] font-semibold text-lg",children:"Listening..."})}),(0,s.jsxs)("div",{className:"jsx-302a444b4c98172c flex flex-col justify-center mt-auto w-full",children:[(0,s.jsx)("div",{className:"jsx-302a444b4c98172c flex-1 flex justify-center",children:(0,s.jsx)("img",{src:"listening"===l?"/blob-listening.gif":"speaking"===l?"/blob-answering.gif":"/blob-static.gif",alt:"Start",width:100,height:100,onClick:()=>{n||(e?.(),c("listening"))},className:`jsx-302a444b4c98172c cursor-pointer ${"listening"===l||"speaking"===l?"pointer-events-none":""}`})}),(0,s.jsx)("div",{className:"jsx-302a444b4c98172c flex-1 flex justify-end pr-[6px] pb-[6px]",children:(0,s.jsx)("img",{src:"/end-call.svg",alt:"End",width:30,height:30,onClick:()=>{("listening"===l||"speaking"===l)&&(t?.(),c("idle"))},className:`jsx-302a444b4c98172c cursor-pointer ${"idle"===l?"opacity-50 pointer-events-none":""}`})})]})]})})]}),(0,s.jsx)(r(),{id:"302a444b4c98172c",children:'.cont.jsx-302a444b4c98172c{width:100vw;max-width:440px}@media(min-width:768px){.cont.jsx-302a444b4c98172c{width:440px}video[src="/eva-bg.mp4"].jsx-302a444b4c98172c{-webkit-border-radius:55px;-moz-border-radius:55px;border-radius:55px}}'})]})}function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(null,arguments)}let u=new Blob(['\n      const TARGET_SAMPLE_RATE = 16000;\n      class RawAudioProcessor extends AudioWorkletProcessor {\n        constructor() {\n          super();\n          this.buffer = []; // Initialize an empty buffer\n          this.bufferSize = TARGET_SAMPLE_RATE / 4; // Define the threshold for buffer size to be ~0.25s\n\n          if (globalThis.LibSampleRate && sampleRate !== TARGET_SAMPLE_RATE) {\n            globalThis.LibSampleRate.create(1, sampleRate, TARGET_SAMPLE_RATE).then(resampler => {\n              this.resampler = resampler;\n            });\n          }\n        }\n        process(inputs, outputs) {\n          const input = inputs[0]; // Get the first input node\n          if (input.length > 0) {\n            let channelData = input[0]; // Get the first channel\'s data\n\n            // Resample the audio if necessary\n            if (this.resampler) {\n              channelData = this.resampler.full(channelData);\n            }\n\n            // Add channel data to the buffer\n            this.buffer.push(...channelData);\n            // Get max volume \n            let sum = 0.0;\n            for (let i = 0; i < channelData.length; i++) {\n              sum += channelData[i] * channelData[i];\n            }\n            const maxVolume = Math.sqrt(sum / channelData.length);\n            // Check if buffer size has reached or exceeded the threshold\n            if (this.buffer.length >= this.bufferSize) {\n              const float32Array = new Float32Array(this.buffer)\n              let pcm16Array = new Int16Array(float32Array.length);\n\n              // Iterate through the Float32Array and convert each sample to PCM16\n              for (let i = 0; i < float32Array.length; i++) {\n                // Clamp the value to the range [-1, 1]\n                let sample = Math.max(-1, Math.min(1, float32Array[i]));\n            \n                // Scale the sample to the range [-32768, 32767] and store it in the Int16Array\n                pcm16Array[i] = sample < 0 ? sample * 32768 : sample * 32767;\n              }\n            \n              // Send the buffered data to the main script\n              this.port.postMessage([pcm16Array, maxVolume]);\n            \n              // Clear the buffer after sending\n              this.buffer = [];\n            }\n          }\n          return true; // Continue processing\n        }\n      }\n      registerProcessor("raw-audio-processor", RawAudioProcessor);\n  '],{type:"application/javascript"}),d=URL.createObjectURL(u);class h{static async create(e){let t=null,n=null;try{let s=navigator.mediaDevices.getSupportedConstraints().sampleRate,i=(t=new window.AudioContext(s?{sampleRate:e}:{})).createAnalyser();s||await t.audioWorklet.addModule("https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js"),await t.audioWorklet.addModule(d),n=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:{ideal:e},echoCancellation:{ideal:!0},noiseSuppression:{ideal:!0}}});let r=t.createMediaStreamSource(n),o=new AudioWorkletNode(t,"raw-audio-processor");return r.connect(i),i.connect(o),new h(t,i,o,n)}catch(e){var s,i;throw null==(s=n)||s.getTracks().forEach(e=>e.stop()),null==(i=t)||i.close(),e}}constructor(e,t,n,s){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.context=e,this.analyser=t,this.worklet=n,this.inputStream=s}async close(){this.inputStream.getTracks().forEach(e=>e.stop()),await this.context.close()}}let p=new Blob(['\n      class AudioConcatProcessor extends AudioWorkletProcessor {\n        constructor() {\n          super();\n          this.buffers = []; // Initialize an empty buffer\n          this.cursor = 0;\n          this.currentBuffer = null;\n          this.wasInterrupted = false;\n          this.finished = false;\n\n          this.port.onmessage = ({ data }) => {\n            switch (data.type) {\n              case "buffer":\n                this.wasInterrupted = false;\n                this.buffers.push(new Int16Array(data.buffer));\n                break;\n              case "interrupt":\n                this.wasInterrupted = true;\n                break;\n              case "clearInterrupted":\n                if (this.wasInterrupted) {\n                  this.wasInterrupted = false;\n                  this.buffers = [];\n                  this.currentBuffer = null;\n                }\n            }\n          };\n        }\n        process(_, outputs) {\n          let finished = false;\n          const output = outputs[0][0];\n          for (let i = 0; i < output.length; i++) {\n            if (!this.currentBuffer) {\n              if (this.buffers.length === 0) {\n                finished = true;\n                break;\n              }\n              this.currentBuffer = this.buffers.shift();\n              this.cursor = 0;\n            }\n\n            output[i] = this.currentBuffer[this.cursor] / 32768;\n            this.cursor++;\n\n            if (this.cursor >= this.currentBuffer.length) {\n              this.currentBuffer = null;\n            }\n          }\n\n          if (this.finished !== finished) {\n            this.finished = finished;\n            this.port.postMessage({ type: "process", finished });\n          }\n\n          return true; // Continue processing\n        }\n      }\n\n      registerProcessor("audio-concat-processor", AudioConcatProcessor);\n    '],{type:"application/javascript"}),f=URL.createObjectURL(p);class m{static async create(e){let t=null;try{let n=(t=new AudioContext({sampleRate:e})).createAnalyser(),s=t.createGain();s.connect(n),n.connect(t.destination),await t.audioWorklet.addModule(f);let i=new AudioWorkletNode(t,"audio-concat-processor");return i.connect(s),new m(t,n,s,i)}catch(e){var n;throw null==(n=t)||n.close(),e}}constructor(e,t,n,s){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.context=e,this.analyser=t,this.gain=n,this.worklet=s}async close(){await this.context.close()}}class v{static async create(e){var t,n;let s=null;try{let n=null!=(t=e.origin)?t:"wss://api.elevenlabs.io",i=e.signedUrl?e.signedUrl:n+"/v1/convai/conversation?agent_id="+e.agentId,r=["convai"];e.authorization&&r.push(`bearer.${e.authorization}`),s=new WebSocket(i,r);let o=await new Promise((t,n)=>{s.addEventListener("open",()=>{var t,n,i,r,o;let a={type:"conversation_initiation_client_data"};e.overrides&&(a.conversation_config_override={agent:{prompt:null==(n=e.overrides.agent)?void 0:n.prompt,first_message:null==(i=e.overrides.agent)?void 0:i.firstMessage,language:null==(r=e.overrides.agent)?void 0:r.language},tts:{voice_id:null==(o=e.overrides.tts)?void 0:o.voiceId}}),e.customLlmExtraBody&&(a.custom_llm_extra_body=e.customLlmExtraBody),null==(t=s)||t.send(JSON.stringify(a))},{once:!0}),s.addEventListener("error",n),s.addEventListener("close",n),s.addEventListener("message",e=>{let n=JSON.parse(e.data);n.type&&("conversation_initiation_metadata"===n.type?t(n.conversation_initiation_metadata_event):console.warn("First received message is not conversation metadata."))},{once:!0})}),a=o.conversation_id,l=parseInt(o.agent_output_audio_format.replace("pcm_",""));return new v(s,a,l)}catch(e){throw null==(n=s)||n.close(),e}}constructor(e,t,n){this.socket=void 0,this.conversationId=void 0,this.sampleRate=void 0,this.socket=e,this.conversationId=t,this.sampleRate=n}close(){this.socket.close()}sendMessage(e){this.socket.send(JSON.stringify(e))}}let g={clientTools:{}},y={onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onModeChange:()=>{},onStatusChange:()=>{}};class _{static async startSession(e){let t=c({},g,y,e);t.onStatusChange({status:"connecting"});let n=null,s=null,i=null;try{return n=await h.create(16e3),s=await v.create(e),i=await m.create(s.sampleRate),new _(t,s,n,i)}catch(e){var r,o,a;throw t.onStatusChange({status:"disconnected"}),null==(r=s)||r.close(),await (null==(o=n)?void 0:o.close()),await (null==(a=i)?void 0:a.close()),e}}constructor(e,t,n,s){var i=this;this.options=void 0,this.connection=void 0,this.input=void 0,this.output=void 0,this.lastInterruptTimestamp=0,this.mode="listening",this.status="connecting",this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.volume=1,this.endSession=async function(){"connected"===i.status&&(i.updateStatus("disconnecting"),i.connection.close(),await i.input.close(),await i.output.close(),i.updateStatus("disconnected"))},this.updateMode=e=>{e!==this.mode&&(this.mode=e,this.options.onModeChange({mode:e}))},this.updateStatus=e=>{e!==this.status&&(this.status=e,this.options.onStatusChange({status:e}))},this.onEvent=async function(e){try{let n=JSON.parse(e.data);if(!n.type)return;switch(n.type){case"interruption":n.interruption_event&&(i.lastInterruptTimestamp=n.interruption_event.event_id),i.fadeOutAudio();break;case"agent_response":i.options.onMessage({source:"ai",message:n.agent_response_event.agent_response});break;case"user_transcript":i.options.onMessage({source:"user",message:n.user_transcription_event.user_transcript});break;case"internal_tentative_agent_response":i.options.onDebug({type:"tentative_agent_response",response:n.tentative_agent_response_internal_event.tentative_agent_response});break;case"client_tool_call":if(i.options.clientTools.hasOwnProperty(n.client_tool_call.tool_name)){try{var t;let e=null!=(t=await i.options.clientTools[n.client_tool_call.tool_name](n.client_tool_call.parameters))?t:"Client tool execution successful.";i.connection.sendMessage({type:"client_tool_result",tool_call_id:n.client_tool_call.tool_call_id,result:e,is_error:!1})}catch(e){i.onError("Client tool execution failed with following error: "+(null==e?void 0:e.message),{clientToolName:n.client_tool_call.tool_name}),i.connection.sendMessage({type:"client_tool_result",tool_call_id:n.client_tool_call.tool_call_id,result:"Client tool execution failed: "+(null==e?void 0:e.message),is_error:!0})}break}if(i.options.onUnhandledClientToolCall){i.options.onUnhandledClientToolCall(n.client_tool_call);break}i.onError(`Client tool with name ${n.client_tool_call.tool_name} is not defined on client`,{clientToolName:n.client_tool_call.tool_name}),i.connection.sendMessage({type:"client_tool_result",tool_call_id:n.client_tool_call.tool_call_id,result:`Client tool with name ${n.client_tool_call.tool_name} is not defined on client`,is_error:!0});break;case"audio":i.lastInterruptTimestamp<=n.audio_event.event_id&&(i.addAudioBase64Chunk(n.audio_event.audio_base_64),i.updateMode("speaking"));break;case"ping":i.connection.sendMessage({type:"pong",event_id:n.ping_event.event_id});break;default:i.options.onDebug(n)}}catch(t){return void i.onError("Failed to parse event data",{event:e})}},this.onInputWorkletMessage=e=>{"connected"===this.status&&this.connection.sendMessage({user_audio_chunk:function(e){let t=new Uint8Array(e);return window.btoa(String.fromCharCode(...t))}(e.data[0].buffer)})},this.onOutputWorkletMessage=({data:e})=>{"process"===e.type&&this.updateMode(e.finished?"listening":"speaking")},this.addAudioBase64Chunk=async function(e){i.output.gain.gain.value=i.volume,i.output.worklet.port.postMessage({type:"clearInterrupted"}),i.output.worklet.port.postMessage({type:"buffer",buffer:function(e){let t=window.atob(e),n=t.length,s=new Uint8Array(n);for(let e=0;e<n;e++)s[e]=t.charCodeAt(e);return s.buffer}(e)})},this.fadeOutAudio=async function(){i.updateMode("listening"),i.output.worklet.port.postMessage({type:"interrupt"}),i.output.gain.gain.exponentialRampToValueAtTime(1e-4,i.output.context.currentTime+2),setTimeout(()=>{i.output.gain.gain.value=i.volume,i.output.worklet.port.postMessage({type:"clearInterrupted"})},2e3)},this.onError=(e,t)=>{console.error(e,t),this.options.onError(e,t)},this.calculateVolume=e=>{if(0===e.length)return 0;let t=0;for(let n=0;n<e.length;n++)t+=e[n]/255;return(t/=e.length)<0?0:t>1?1:t},this.getId=()=>this.connection.conversationId,this.setVolume=({volume:e})=>{this.volume=e},this.getInputByteFrequencyData=()=>(null!=this.inputFrequencyData||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData),this.getOutputByteFrequencyData=()=>(null!=this.outputFrequencyData||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData),this.getInputVolume=()=>this.calculateVolume(this.getInputByteFrequencyData()),this.getOutputVolume=()=>this.calculateVolume(this.getOutputByteFrequencyData()),this.options=e,this.connection=t,this.input=n,this.output=s,this.options.onConnect({conversationId:t.conversationId}),this.connection.socket.addEventListener("message",e=>{this.onEvent(e)}),this.connection.socket.addEventListener("error",e=>{this.updateStatus("disconnected"),this.onError("Socket error",e)}),this.connection.socket.addEventListener("close",()=>{this.updateStatus("disconnected"),this.options.onDisconnect()}),this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage,this.updateStatus("connected")}}function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(null,arguments)}var x=n(9322),w=n(4607);function S(){let{slug:e}=(0,x.useParams)(),[t,n]=(0,o.useState)(""),[i,r]=(0,o.useState)([]),[a,c]=(0,o.useState)(!1),u=()=>{fetch(`/api/c?id=${e}`).then(e=>e.json()).then(e=>{e.length>0&&r(e.map(e=>({...e,formatted:{text:e.content_transcript,transcript:e.content_transcript}})))})},d=function(e){let t=(0,o.useRef)(null),n=(0,o.useRef)(null),[s,i]=(0,o.useState)("disconnected"),[r,a]=(0,o.useState)("listening");return(0,o.useEffect)(()=>()=>{var e;null==(e=t.current)||e.endSession()},[]),{startSession:async s=>{if(t.current)return t.current.getId();if(n.current)return(await n.current).getId();try{return n.current=_.startSession(b({},null!=e?e:{},null!=s?s:{},{onModeChange:({mode:e})=>{a(e)},onStatusChange:({status:e})=>{i(e)}})),t.current=await n.current,t.current.getId()}finally{n.current=null}},endSession:async()=>{let e=t.current;t.current=null,await (null==e?void 0:e.endSession())},setVolume:({volume:e})=>{var n;null==(n=t.current)||n.setVolume({volume:e})},getInputByteFrequencyData:()=>{var e;return null==(e=t.current)?void 0:e.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var e;return null==(e=t.current)?void 0:e.getOutputByteFrequencyData()},getInputVolume:()=>{var e,n;return null!=(e=null==(n=t.current)?void 0:n.getInputVolume())?e:0},getOutputVolume:()=>{var e,n;return null!=(e=null==(n=t.current)?void 0:n.getOutputVolume())?e:0},status:s,isSpeaking:"speaking"===r}}({onError:e=>{(0,w.o)(e)},onConnect:()=>{(0,w.o)("Connected to ElevenLabs.")},onMessage:t=>{let{message:s,source:i}=t;"ai"===i&&n(s),fetch("/api/c",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,item:{type:"message",status:"completed",object:"realtime.item",id:"item_"+Math.random(),role:"ai"===i?"assistant":"user",content:[{type:"text",transcript:s}]}})}).then(u)}}),h=(0,o.useCallback)(async()=>{(0,w.o)("Setting up ElevenLabs...");try{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await fetch("/api/i",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();if(t.error)return(0,w.o)(t.error);await d.startSession({signedUrl:t.apiKey})}catch(e){(0,w.o)("Failed to set up ElevenLabs client :/")}},[d]),p=(0,o.useCallback)(async()=>{await d.endSession()},[d]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l,{currentText:t,isAudioPlaying:d.isSpeaking,onStopListening:()=>{"connected"===d.status&&p(),n("")},onStartListening:()=>{"connected"!==d.status&&h()}})})}},4915:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,1867,23)),Promise.resolve().then(n.t.bind(n,9751,23)),Promise.resolve().then(n.t.bind(n,2395,23)),Promise.resolve().then(n.t.bind(n,4394,23)),Promise.resolve().then(n.t.bind(n,334,23)),Promise.resolve().then(n.t.bind(n,4722,23)),Promise.resolve().then(n.t.bind(n,5776,23)),Promise.resolve().then(n.t.bind(n,8154,23))},6802:()=>{},7195:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});let s=(0,n(678).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nileshvishwasrao/Nilesh/elevenlabs-test/security/app/c/[slug]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nileshvishwasrao/Nilesh/elevenlabs-test/security/app/c/[slug]/page.tsx","default")},8315:()=>{},8410:(e,t,n)=>{Promise.resolve().then(n.bind(n,705))},8683:(e,t,n)=>{"use strict";n(6802);var s=n(9045),i=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(s),r="undefined"!=typeof process&&process.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},a=function(){function e(e){var t=void 0===e?{}:e,n=t.name,s=void 0===n?"stylesheet":n,i=t.optimizeForSpeed,a=void 0===i?r:i;l(o(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",l("boolean"==typeof a,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=a,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t,n=e.prototype;return n.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},n.isOptimizeForSpeed=function(){return this._optimizeForSpeed},n.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),n},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},n.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},n.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},n.insertRule=function(e,t){return l(o(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},n.replaceRule=function(e,t){this._optimizeForSpeed;var n=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(t,e)}catch(s){r||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,e)}return e},n.deleteRule=function(e){this._serverSheet.deleteRule(e)},n.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},n.cssRules=function(){return this._serverSheet.cssRules},n.makeStyleTag=function(e,t,n){t&&l(o(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return n?i.insertBefore(s,n):i.appendChild(s),s},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},u={};function d(e,t){if(!t)return"jsx-"+e;var n=String(t),s=e+n;return u[s]||(u[s]="jsx-"+c(e+"-"+n)),u[s]}function h(e,t){var n=e+(t=t.replace(/\/style/gi,"\\/style"));return u[n]||(u[n]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[n]}var p=function(){function e(e){var t=void 0===e?{}:e,n=t.styleSheet,s=void 0===n?null:n,i=t.optimizeForSpeed,r=void 0!==i&&i;this._sheet=s||new a({name:"styled-jsx",optimizeForSpeed:r}),this._sheet.inject(),s&&"boolean"==typeof r&&(this._sheet.setOptimizeForSpeed(r),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var n=this.getIdAndRules(e),s=n.styleId,i=n.rules;if(s in this._instancesCounts){this._instancesCounts[s]+=1;return}var r=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[s]=r,this._instancesCounts[s]=1},t.remove=function(e){var t=this,n=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var s=this._fromServer&&this._fromServer[n];s?(s.parentNode.removeChild(s),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],n=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,n;return t=this.cssRules(),void 0===(n=e)&&(n={}),t.map(function(e){var t=e[0],s=e[1];return i.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:n.nonce?n.nonce:void 0,dangerouslySetInnerHTML:{__html:s}})})},t.getIdAndRules=function(e){var t=e.children,n=e.dynamic,s=e.id;if(n){var i=d(s,n);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return h(i,e)}):[h(i,t)]}}return{styleId:d(s),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=s.createContext(null);f.displayName="StyleSheetContext";i.default.useInsertionEffect||i.default.useLayoutEffect;var m=void 0;function v(e){var t=m||s.useContext(f);return t&&t.add(e),null}v.dynamic=function(e){return e.map(function(e){return d(e[0],e[1])}).join(" ")},t.style=v},8891:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6161,23)),Promise.resolve().then(n.t.bind(n,8425,23)),Promise.resolve().then(n.t.bind(n,1553,23)),Promise.resolve().then(n.t.bind(n,3152,23)),Promise.resolve().then(n.t.bind(n,4448,23)),Promise.resolve().then(n.t.bind(n,9556,23)),Promise.resolve().then(n.t.bind(n,3554,23)),Promise.resolve().then(n.t.bind(n,4244,23))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[62],()=>n(3587));module.exports=s})();